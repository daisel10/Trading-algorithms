# ============================================================================
# KAIR√ìS Core - Rust Trading Engine
# ============================================================================
# Service-specific configuration for the Rust trading engine
# Copy this file to .env and fill in your actual values
# ============================================================================

# ----------------------------------------------------------------------------
# Rust Logging
# ----------------------------------------------------------------------------
RUST_LOG=info,kairos_core=debug
RUST_BACKTRACE=1

# For production:
# RUST_LOG=warn,kairos_core=info
# RUST_BACKTRACE=0

# ----------------------------------------------------------------------------
# gRPC Server Configuration
# ----------------------------------------------------------------------------
GRPC_PORT=50051
GRPC_HOST=0.0.0.0

# gRPC Server Settings
GRPC_MAX_CONCURRENT_STREAMS=100
GRPC_KEEPALIVE_INTERVAL_SEC=30
GRPC_KEEPALIVE_TIMEOUT_SEC=10

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
# These override global settings if needed
# DRAGONFLY_URL=redis://dragonfly:6379
# TIMESCALE_URL=postgresql://kairos:kairos_password@timescale:5432/kairos_trading

# For local development:
# DRAGONFLY_URL=redis://localhost:6379
# TIMESCALE_URL=postgresql://kairos:kairos_password@localhost:5432/kairos_trading

# Connection Pool Settings
DATABASE_MAX_CONNECTIONS=10
DATABASE_MIN_CONNECTIONS=2
DATABASE_CONNECT_TIMEOUT_SEC=5

# ----------------------------------------------------------------------------
# Exchange Connections
# ----------------------------------------------------------------------------
# OKX WebSocket
OKX_WS_PUBLIC_URL=wss://ws.okx.com:8443/ws/v5/public
OKX_WS_PRIVATE_URL=wss://ws.okx.com:8443/ws/v5/private
OKX_WS_BUSINESS_URL=wss://ws.okx.com:8443/ws/v5/business

# For demo/testnet:
# OKX_WS_PUBLIC_URL=wss://wspap.okx.com:8443/ws/v5/public
# OKX_WS_PRIVATE_URL=wss://wspap.okx.com:8443/ws/v5/private

# OKX REST API
OKX_REST_URL=https://www.okx.com
# OKX_REST_URL=https://www.okx.com  # testnet: https://www.okx.com (demo uses same URL)

# Connection Settings
WS_RECONNECT_DELAY_MS=5000
WS_MAX_RECONNECT_ATTEMPTS=10
WS_PING_INTERVAL_SEC=20

# ----------------------------------------------------------------------------
# Trading Engine Configuration
# ----------------------------------------------------------------------------
# Order Execution
ORDER_TIMEOUT_SEC=30
MAX_PENDING_ORDERS=100
ORDER_RETRY_ATTEMPTS=3

# Risk Management
MAX_POSITION_SIZE=1000.0
MAX_LEVERAGE=3.0
STOP_LOSS_PERCENTAGE=2.0
TAKE_PROFIT_PERCENTAGE=5.0

# Market Data
TICK_BUFFER_SIZE=1000
ORDERBOOK_DEPTH=20
KLINE_INTERVALS=1m,5m,15m,1h,4h,1d

# ----------------------------------------------------------------------------
# Performance & Threading
# ----------------------------------------------------------------------------
TOKIO_WORKER_THREADS=4
RAYON_NUM_THREADS=4

# ----------------------------------------------------------------------------
# Monitoring & Metrics
# ----------------------------------------------------------------------------
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_INTERVAL_SEC=60

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------
# ENABLE_PAPER_TRADING=true
# ENABLE_DEBUG_ENDPOINTS=false
ENABLE_BACKTESTING=false

# ----------------------------------------------------------------------------
# Exchange API Credentials (‚ö†Ô∏è SECURITY CRITICAL)
# ----------------------------------------------------------------------------
# ‚ö†Ô∏è WARNING: These are SENSITIVE credentials!
# - NEVER commit these values to git
# - ONLY set them in .env (which is gitignored)
# - For production, use environment variables or secrets management
# - Obtain these from your exchange account settings

# ============================================================================
# üîë IMPORTANT: Variable Naming Convention
# ============================================================================
# Use the KAIROS__EXCHANGE__ prefix with double underscores (__) for API keys
# 
# Format: KAIROS__EXCHANGE__<FIELD_NAME>
#   - KAIROS          = Application prefix
#   - __ (double)     = Separator between hierarchy levels
#   - EXCHANGE        = Struct name in config.rs (Settings.exchange)
#   - __ (double)     = Separator between hierarchy levels
#   - OKX_API_KEY     = Field name in ExchangeSettings struct
#
# Why double underscores?
#   Single underscore (_) is part of the field name (okx_api_key)
#   Double underscore (__) separates nested structure levels
# ============================================================================

# OKX Exchange API Keys
# Get these from: https://www.okx.com/account/my-api
KAIROS__EXCHANGE__OKX_API_KEY=your_okx_api_key_here
KAIROS__EXCHANGE__OKX_API_SECRET=your_okx_api_secret_here
KAIROS__EXCHANGE__OKX_API_PASSPHRASE=your_okx_passphrase_here

# Binance Exchange API Keys  
# Get these from: https://www.binance.com/en/my/settings/api-management
KAIROS__EXCHANGE__BINANCE_API_KEY=your_binance_api_key_here
KAIROS__EXCHANGE__BINANCE_API_SECRET=your_binance_api_secret_here

# ----------------------------------------------------------------------------
# Examples of other environment variable formats (if needed)
# ----------------------------------------------------------------------------
# You can also override other settings using the KAIROS__ prefix:
#
# KAIROS__GRPC__PORT=50052
# KAIROS__GRPC__HOST=127.0.0.1
# KAIROS__DATABASE__MAX_CONNECTIONS=20
# KAIROS__TRADING__MAX_LEVERAGE=5.0
# KAIROS__MONITORING__ENABLE_METRICS=false

# ----------------------------------------------------------------------------
# IMPORTANT SECURITY NOTES
# ----------------------------------------------------------------------------
# 1. These API keys grant access to your exchange account
# 2. Enable IP whitelist restrictions on your exchange
# 3. Use API keys with minimal required permissions
# 4. Rotate keys regularly
# 5. Never share these keys or commit them to version control
# 6. For production, consider using a secrets manager (HashiCorp Vault, AWS Secrets Manager, etc.)
