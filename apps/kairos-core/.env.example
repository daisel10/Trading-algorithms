# ============================================================================
# KAIRÃ“S Core - Rust Trading Engine
# ============================================================================
# Service-specific configuration for the Rust trading engine
# This file should be combined with the global .env file
# ============================================================================

# ----------------------------------------------------------------------------
# Rust Logging
# ----------------------------------------------------------------------------
RUST_LOG=info,kairos_core=debug
RUST_BACKTRACE=1

# For production:
# RUST_LOG=warn,kairos_core=info
# RUST_BACKTRACE=0

# ----------------------------------------------------------------------------
# gRPC Server Configuration
# ----------------------------------------------------------------------------
GRPC_PORT=50051
GRPC_HOST=0.0.0.0

# gRPC Server Settings
GRPC_MAX_CONCURRENT_STREAMS=100
GRPC_KEEPALIVE_INTERVAL_SEC=30
GRPC_KEEPALIVE_TIMEOUT_SEC=10

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
# These override global settings if needed
# DRAGONFLY_URL=redis://dragonfly:6379
# TIMESCALE_URL=postgresql://kairos:kairos_password@timescale:5432/kairos_trading

# For local development:
# DRAGONFLY_URL=redis://localhost:6379
# TIMESCALE_URL=postgresql://kairos:kairos_password@localhost:5432/kairos_trading

# Connection Pool Settings
DATABASE_MAX_CONNECTIONS=10
DATABASE_MIN_CONNECTIONS=2
DATABASE_CONNECT_TIMEOUT_SEC=5

# ----------------------------------------------------------------------------
# Exchange Connections
# ----------------------------------------------------------------------------
# OKX WebSocket
OKX_WS_PUBLIC_URL=wss://ws.okx.com:8443/ws/v5/public
OKX_WS_PRIVATE_URL=wss://ws.okx.com:8443/ws/v5/private
OKX_WS_BUSINESS_URL=wss://ws.okx.com:8443/ws/v5/business

# For demo/testnet:
# OKX_WS_PUBLIC_URL=wss://wspap.okx.com:8443/ws/v5/public
# OKX_WS_PRIVATE_URL=wss://wspap.okx.com:8443/ws/v5/private

# OKX REST API
OKX_REST_URL=https://www.okx.com
# OKX_REST_URL=https://www.okx.com  # testnet: https://www.okx.com (demo uses same URL)

# Connection Settings
WS_RECONNECT_DELAY_MS=5000
WS_MAX_RECONNECT_ATTEMPTS=10
WS_PING_INTERVAL_SEC=20

# ----------------------------------------------------------------------------
# Trading Engine Configuration
# ----------------------------------------------------------------------------
# Order Execution
ORDER_TIMEOUT_SEC=30
MAX_PENDING_ORDERS=100
ORDER_RETRY_ATTEMPTS=3

# Risk Management
MAX_POSITION_SIZE=1000.0
MAX_LEVERAGE=3.0
STOP_LOSS_PERCENTAGE=2.0
TAKE_PROFIT_PERCENTAGE=5.0

# Market Data
TICK_BUFFER_SIZE=1000
ORDERBOOK_DEPTH=20
KLINE_INTERVALS=1m,5m,15m,1h,4h,1d

# ----------------------------------------------------------------------------
# Performance & Threading
# ----------------------------------------------------------------------------
TOKIO_WORKER_THREADS=4
RAYON_NUM_THREADS=4

# ----------------------------------------------------------------------------
# Monitoring & Metrics
# ----------------------------------------------------------------------------
ENABLE_METRICS=true
METRICS_PORT=9090
METRICS_INTERVAL_SEC=60

# ----------------------------------------------------------------------------
# Feature Flags
# ----------------------------------------------------------------------------
# ENABLE_PAPER_TRADING=true
# ENABLE_DEBUG_ENDPOINTS=false
ENABLE_BACKTESTING=false
